<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JSON Data Mapper</title>
  <style>
    *, ::before, ::after {
  --tw-border-spacing-x: 0;
  --tw-border-spacing-y: 0;
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-skew-x: 0;
  --tw-skew-y: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;
  --tw-pan-x:  ;
  --tw-pan-y:  ;
  --tw-pinch-zoom:  ;
  --tw-scroll-snap-strictness: proximity;
  --tw-gradient-from-position:  ;
  --tw-gradient-via-position:  ;
  --tw-gradient-to-position:  ;
  --tw-ordinal:  ;
  --tw-slashed-zero:  ;
  --tw-numeric-figure:  ;
  --tw-numeric-spacing:  ;
  --tw-numeric-fraction:  ;
  --tw-ring-inset:  ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgb(59 130 246 / 0.5);
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-shadow: 0 0 #0000;
  --tw-shadow-colored: 0 0 #0000;
  --tw-blur:  ;
  --tw-brightness:  ;
  --tw-contrast:  ;
  --tw-grayscale:  ;
  --tw-hue-rotate:  ;
  --tw-invert:  ;
  --tw-saturate:  ;
  --tw-sepia:  ;
  --tw-drop-shadow:  ;
  --tw-backdrop-blur:  ;
  --tw-backdrop-brightness:  ;
  --tw-backdrop-contrast:  ;
  --tw-backdrop-grayscale:  ;
  --tw-backdrop-hue-rotate:  ;
  --tw-backdrop-invert:  ;
  --tw-backdrop-opacity:  ;
  --tw-backdrop-saturate:  ;
  --tw-backdrop-sepia:  ;
  --tw-contain-size:  ;
  --tw-contain-layout:  ;
  --tw-contain-paint:  ;
  --tw-contain-style:  ;
}

::backdrop {
  --tw-border-spacing-x: 0;
  --tw-border-spacing-y: 0;
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-skew-x: 0;
  --tw-skew-y: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;
  --tw-pan-x:  ;
  --tw-pan-y:  ;
  --tw-pinch-zoom:  ;
  --tw-scroll-snap-strictness: proximity;
  --tw-gradient-from-position:  ;
  --tw-gradient-via-position:  ;
  --tw-gradient-to-position:  ;
  --tw-ordinal:  ;
  --tw-slashed-zero:  ;
  --tw-numeric-figure:  ;
  --tw-numeric-spacing:  ;
  --tw-numeric-fraction:  ;
  --tw-ring-inset:  ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgb(59 130 246 / 0.5);
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-shadow: 0 0 #0000;
  --tw-shadow-colored: 0 0 #0000;
  --tw-blur:  ;
  --tw-brightness:  ;
  --tw-contrast:  ;
  --tw-grayscale:  ;
  --tw-hue-rotate:  ;
  --tw-invert:  ;
  --tw-saturate:  ;
  --tw-sepia:  ;
  --tw-drop-shadow:  ;
  --tw-backdrop-blur:  ;
  --tw-backdrop-brightness:  ;
  --tw-backdrop-contrast:  ;
  --tw-backdrop-grayscale:  ;
  --tw-backdrop-hue-rotate:  ;
  --tw-backdrop-invert:  ;
  --tw-backdrop-opacity:  ;
  --tw-backdrop-saturate:  ;
  --tw-backdrop-sepia:  ;
  --tw-contain-size:  ;
  --tw-contain-layout:  ;
  --tw-contain-paint:  ;
  --tw-contain-style:  ;
}/*
! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com
*//*
1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)
2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)
*/

*,
::before,
::after {
  box-sizing: border-box; /* 1 */
  border-width: 0; /* 2 */
  border-style: solid; /* 2 */
  border-color: #e5e7eb; /* 2 */
}

::before,
::after {
  --tw-content: '';
}

/*
1. Use a consistent sensible line-height in all browsers.
2. Prevent adjustments of font size after orientation changes in iOS.
3. Use a more readable tab size.
4. Use the user's configured `sans` font-family by default.
5. Use the user's configured `sans` font-feature-settings by default.
6. Use the user's configured `sans` font-variation-settings by default.
7. Disable tap highlights on iOS
*/

html,
:host {
  line-height: 1.5; /* 1 */
  -webkit-text-size-adjust: 100%; /* 2 */
  -moz-tab-size: 4; /* 3 */
  -o-tab-size: 4;
     tab-size: 4; /* 3 */
  font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; /* 4 */
  font-feature-settings: normal; /* 5 */
  font-variation-settings: normal; /* 6 */
  -webkit-tap-highlight-color: transparent; /* 7 */
}

/*
1. Remove the margin in all browsers.
2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.
*/

body {
  margin: 0; /* 1 */
  line-height: inherit; /* 2 */
}

/*
1. Add the correct height in Firefox.
2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)
3. Ensure horizontal rules are visible by default.
*/

hr {
  height: 0; /* 1 */
  color: inherit; /* 2 */
  border-top-width: 1px; /* 3 */
}

/*
Add the correct text decoration in Chrome, Edge, and Safari.
*/

abbr:where([title]) {
  -webkit-text-decoration: underline dotted;
          text-decoration: underline dotted;
}

/*
Remove the default font size and weight for headings.
*/

h1,
h2,
h3,
h4,
h5,
h6 {
  font-size: inherit;
  font-weight: inherit;
}

/*
Reset links to optimize for opt-in styling instead of opt-out.
*/

a {
  color: inherit;
  text-decoration: inherit;
}

/*
Add the correct font weight in Edge and Safari.
*/

b,
strong {
  font-weight: bolder;
}

/*
1. Use the user's configured `mono` font-family by default.
2. Use the user's configured `mono` font-feature-settings by default.
3. Use the user's configured `mono` font-variation-settings by default.
4. Correct the odd `em` font sizing in all browsers.
*/

code,
kbd,
samp,
pre {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; /* 1 */
  font-feature-settings: normal; /* 2 */
  font-variation-settings: normal; /* 3 */
  font-size: 1em; /* 4 */
}

/*
Add the correct font size in all browsers.
*/

small {
  font-size: 80%;
}

/*
Prevent `sub` and `sup` elements from affecting the line height in all browsers.
*/

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/*
1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)
2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)
3. Remove gaps between table borders by default.
*/

table {
  text-indent: 0; /* 1 */
  border-color: inherit; /* 2 */
  border-collapse: collapse; /* 3 */
}

/*
1. Change the font styles in all browsers.
2. Remove the margin in Firefox and Safari.
3. Remove default padding in all browsers.
*/

button,
input,
optgroup,
select,
textarea {
  font-family: inherit; /* 1 */
  font-feature-settings: inherit; /* 1 */
  font-variation-settings: inherit; /* 1 */
  font-size: 100%; /* 1 */
  font-weight: inherit; /* 1 */
  line-height: inherit; /* 1 */
  letter-spacing: inherit; /* 1 */
  color: inherit; /* 1 */
  margin: 0; /* 2 */
  padding: 0; /* 3 */
}

/*
Remove the inheritance of text transform in Edge and Firefox.
*/

button,
select {
  text-transform: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Remove default button styles.
*/

button,
input:where([type='button']),
input:where([type='reset']),
input:where([type='submit']) {
  -webkit-appearance: button; /* 1 */
  background-color: transparent; /* 2 */
  background-image: none; /* 2 */
}

/*
Use the modern Firefox focus style for all focusable elements.
*/

:-moz-focusring {
  outline: auto;
}

/*
Remove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)
*/

:-moz-ui-invalid {
  box-shadow: none;
}

/*
Add the correct vertical alignment in Chrome and Firefox.
*/

progress {
  vertical-align: baseline;
}

/*
Correct the cursor style of increment and decrement buttons in Safari.
*/

::-webkit-inner-spin-button,
::-webkit-outer-spin-button {
  height: auto;
}

/*
1. Correct the odd appearance in Chrome and Safari.
2. Correct the outline style in Safari.
*/

[type='search'] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/*
Remove the inner padding in Chrome and Safari on macOS.
*/

::-webkit-search-decoration {
  -webkit-appearance: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Change font properties to `inherit` in Safari.
*/

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/*
Add the correct display in Chrome and Safari.
*/

summary {
  display: list-item;
}

/*
Removes the default spacing and border for appropriate elements.
*/

blockquote,
dl,
dd,
h1,
h2,
h3,
h4,
h5,
h6,
hr,
figure,
p,
pre {
  margin: 0;
}

fieldset {
  margin: 0;
  padding: 0;
}

legend {
  padding: 0;
}

ol,
ul,
menu {
  list-style: none;
  margin: 0;
  padding: 0;
}

/*
Reset default styling for dialogs.
*/
dialog {
  padding: 0;
}

/*
Prevent resizing textareas horizontally by default.
*/

textarea {
  resize: vertical;
}

/*
1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)
2. Set the default placeholder color to the user's configured gray 400 color.
*/

input::-moz-placeholder, textarea::-moz-placeholder {
  opacity: 1; /* 1 */
  color: #9ca3af; /* 2 */
}

input::placeholder,
textarea::placeholder {
  opacity: 1; /* 1 */
  color: #9ca3af; /* 2 */
}

/*
Set the default cursor for buttons.
*/

button,
[role="button"] {
  cursor: pointer;
}

/*
Make sure disabled buttons don't get the pointer cursor.
*/
:disabled {
  cursor: default;
}

/*
1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)
2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)
   This can trigger a poorly considered lint error in some tools but is included by design.
*/

img,
svg,
video,
canvas,
audio,
iframe,
embed,
object {
  display: block; /* 1 */
  vertical-align: middle; /* 2 */
}

/*
Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)
*/

img,
video {
  max-width: 100%;
  height: auto;
}

/* Make elements with the HTML hidden attribute stay hidden by default */
[hidden]:where(:not([hidden="until-found"])) {
  display: none;
}
.container {
  width: 100%;
}
@media (min-width: 640px) {

  .container {
    max-width: 640px;
  }
}
@media (min-width: 768px) {

  .container {
    max-width: 768px;
  }
}
@media (min-width: 1024px) {

  .container {
    max-width: 1024px;
  }
}
@media (min-width: 1280px) {

  .container {
    max-width: 1280px;
  }
}
@media (min-width: 1536px) {

  .container {
    max-width: 1536px;
  }
}
/* Button variants */
.btn-primary {
  cursor: pointer;
  border-radius: 0.25rem;
  border-style: none;
  --tw-bg-opacity: 1;
  background-color: rgb(0 102 204 / var(--tw-bg-opacity, 1));
  padding-left: 12px;
  padding-right: 12px;
  padding-top: 6px;
  padding-bottom: 6px;
  font-size: 11px;
  font-weight: 500;
  --tw-text-opacity: 1;
  color: rgb(255 255 255 / var(--tw-text-opacity, 1));
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.btn-primary:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(0 82 163 / var(--tw-bg-opacity, 1));
}
.btn-secondary {
  cursor: pointer;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1));
  padding-left: 12px;
  padding-right: 12px;
  padding-top: 6px;
  padding-bottom: 6px;
  font-size: 11px;
  font-weight: 500;
  --tw-text-opacity: 1;
  color: rgb(51 51 51 / var(--tw-text-opacity, 1));
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.btn-secondary:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(229 231 235 / var(--tw-bg-opacity, 1));
}
.btn-danger {
  cursor: pointer;
  border-radius: 0.25rem;
  border-style: none;
  --tw-bg-opacity: 1;
  background-color: rgb(231 76 60 / var(--tw-bg-opacity, 1));
  padding-left: 6px;
  padding-right: 6px;
  padding-top: 4px;
  padding-bottom: 4px;
  font-size: 10px;
  --tw-text-opacity: 1;
  color: rgb(255 255 255 / var(--tw-text-opacity, 1));
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.btn-danger:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(192 57 43 / var(--tw-bg-opacity, 1));
}
.btn-success {
  cursor: pointer;
  border-radius: 0.375rem;
  border-style: none;
  --tw-bg-opacity: 1;
  background-color: rgb(24 160 251 / var(--tw-bg-opacity, 1));
  padding-left: 12px;
  padding-right: 12px;
  padding-top: 8px;
  padding-bottom: 8px;
  font-size: 12px;
  font-weight: 600;
  --tw-text-opacity: 1;
  color: rgb(255 255 255 / var(--tw-text-opacity, 1));
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.btn-success:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(0 115 230 / var(--tw-bg-opacity, 1));
}
.btn-success:disabled {
  cursor: not-allowed;
  --tw-bg-opacity: 1;
  background-color: rgb(209 213 219 / var(--tw-bg-opacity, 1));
}
/* Form elements */
.form-input {
  box-sizing: border-box;
  width: 100%;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));
  padding-left: 6px;
  padding-right: 6px;
  padding-top: 0.375rem;
  padding-bottom: 0.375rem;
  font-size: 11px;
}
.form-input:focus {
  --tw-border-opacity: 1;
  border-color: rgb(0 102 204 / var(--tw-border-opacity, 1));
  outline: 2px solid transparent;
  outline-offset: 2px;
}
.form-select {
  box-sizing: border-box;
  width: 100%;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));
  padding-left: 6px;
  padding-right: 6px;
  padding-top: 0.375rem;
  padding-bottom: 0.375rem;
  font-size: 11px;
}
.form-select:focus {
  --tw-border-opacity: 1;
  border-color: rgb(0 102 204 / var(--tw-border-opacity, 1));
  outline: 2px solid transparent;
  outline-offset: 2px;
}
.form-label {
  margin-bottom: 4px;
  display: block;
  font-size: 11px;
  font-weight: 500;
  --tw-text-opacity: 1;
  color: rgb(51 51 51 / var(--tw-text-opacity, 1));
}
.form-group {
  margin-bottom: 8px;
}
.form-row {
  display: flex;
  gap: 6px;
}
.form-row .form-group {
  flex: 1 1 0%;
}
.file-button {
  margin-top: 6px;
  margin-bottom: 6px;
  display: inline-block;
  cursor: pointer;
  border-radius: 0.25rem;
  --tw-bg-opacity: 1;
  background-color: rgb(0 102 204 / var(--tw-bg-opacity, 1));
  padding-left: 12px;
  padding-right: 12px;
  padding-top: 6px;
  padding-bottom: 6px;
  font-size: 11px;
  font-weight: 500;
  --tw-text-opacity: 1;
  color: rgb(255 255 255 / var(--tw-text-opacity, 1));
}
.file-button:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(0 82 163 / var(--tw-bg-opacity, 1));
}
.fetch-button {
  cursor: pointer;
  border-radius: 0.25rem;
  border-style: none;
  --tw-bg-opacity: 1;
  background-color: rgb(0 102 204 / var(--tw-bg-opacity, 1));
  padding-left: 12px;
  padding-right: 12px;
  padding-top: 6px;
  padding-bottom: 6px;
  font-size: 11px;
  font-weight: 500;
  --tw-text-opacity: 1;
  color: rgb(255 255 255 / var(--tw-text-opacity, 1));
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.fetch-button:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(0 82 163 / var(--tw-bg-opacity, 1));
}
.fetch-button:disabled {
  cursor: not-allowed;
  --tw-bg-opacity: 1;
  background-color: rgb(209 213 219 / var(--tw-bg-opacity, 1));
}
/* Custom component patterns for complex elements */
.data-source-tab {
  cursor: pointer;
  border-bottom-width: 2px;
  border-style: none;
  border-color: transparent;
  background-color: transparent;
  padding-left: 12px;
  padding-right: 12px;
  padding-top: 6px;
  padding-bottom: 6px;
  font-size: 11px;
  font-weight: 500;
  --tw-text-opacity: 1;
  color: rgb(102 102 102 / var(--tw-text-opacity, 1));
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.data-source-tab:hover {
  --tw-text-opacity: 1;
  color: rgb(0 102 204 / var(--tw-text-opacity, 1));
}
.data-source-tab.active {
  --tw-border-opacity: 1;
  border-color: rgb(0 102 204 / var(--tw-border-opacity, 1));
  --tw-text-opacity: 1;
  color: rgb(0 102 204 / var(--tw-text-opacity, 1));
}
.drop-zone {
  cursor: pointer;
  border-radius: 0.5rem;
  border-width: 2px;
  border-style: dashed;
  --tw-border-opacity: 1;
  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));
  padding: 16px;
  text-align: center;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.drop-zone:hover {
  --tw-border-opacity: 1;
  border-color: rgb(0 102 204 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1));
}
.drop-zone.dragging {
  --tw-border-opacity: 1;
  border-color: rgb(0 102 204 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1));
}
/* Modal styles */
.modal-overlay {
  position: fixed;
  inset: 0px;
  z-index: 50;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgb(0 0 0 / var(--tw-bg-opacity, 1));
  --tw-bg-opacity: 0.5;
}
.modal {
  max-height: 100vh;
  width: 91.666667%;
  max-width: 32rem;
  overflow-y: auto;
  border-radius: 0.5rem;
  --tw-bg-opacity: 1;
  background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));
  padding: 16px;
  --tw-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  --tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}
.modal-header {
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  padding-bottom: 8px;
}
.modal-close {
  display: flex;
  height: 20px;
  width: 20px;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  border-style: none;
  background-color: transparent;
  padding: 0px;
  font-size: 14px;
  --tw-text-opacity: 1;
  color: rgb(102 102 102 / var(--tw-text-opacity, 1));
}
.modal-close:hover {
  --tw-text-opacity: 1;
  color: rgb(51 51 51 / var(--tw-text-opacity, 1));
}
/* Value builder specific styles */
.builder-part {
  position: relative;
  margin-bottom: 8px;
  display: flex;
  cursor: move;
  align-items: center;
  gap: 6px;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1));
  padding: 6px;
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
.builder-part:hover {
  --tw-border-opacity: 1;
  border-color: rgb(0 102 204 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1));
}
.builder-part.dragging {
  --tw-rotate: 1deg;
  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
  opacity: 0.5;
  --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}
.builder-part.drag-over {
  --tw-translate-y: -0.125rem;
  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
  --tw-border-opacity: 1;
  border-color: rgb(24 160 251 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1));
}
/* Mapping table styles */
.mapping-row {
  display: flex;
  align-items: center;
  gap: 6px;
  border-bottom-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  padding: 6px;
}
.mapping-row:last-child {
  border-bottom-width: 0px;
}
.mapping-row label {
  min-width: 5rem;
  flex: 1 1 0%;
  overflow-wrap: break-word;
  font-size: 11px;
  font-weight: 500;
}
.mapping-row input {
  min-width: 6rem;
  flex: 1 1 0%;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));
  padding-left: 0.375rem;
  padding-right: 0.375rem;
  padding-top: 4px;
  padding-bottom: 4px;
  font-size: 11px;
}
.mapping-row input:focus {
  --tw-border-opacity: 1;
  border-color: rgb(0 102 204 / var(--tw-border-opacity, 1));
  outline: 2px solid transparent;
  outline-offset: 2px;
}
/* Preview table styles */
.table-container {
  max-height: 12rem;
  overflow: auto;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
}
.preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 10px;
}
.preview-table th,
  .preview-table td {
  min-width: 4rem;
  max-width: 8rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  padding-left: 0.375rem;
  padding-right: 0.375rem;
  padding-top: 4px;
  padding-bottom: 4px;
  text-align: left;
}
.preview-table th {
  position: sticky;
  top: 0px;
  --tw-bg-opacity: 1;
  background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1));
  font-weight: 600;
}
/* Log entries */
.log-entry {
  display: flex;
  gap: 6px;
  border-bottom-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  padding-left: 6px;
  padding-right: 6px;
  padding-top: 0.375rem;
  padding-bottom: 0.375rem;
  font-size: 10px;
}
.log-entry:last-child {
  border-bottom-width: 0px;
}
.log-entry.info {
  --tw-text-opacity: 1;
  color: rgb(51 51 51 / var(--tw-text-opacity, 1));
}
.log-entry.warning {
  --tw-bg-opacity: 1;
  background-color: rgb(254 249 231 / var(--tw-bg-opacity, 1));
  --tw-text-opacity: 1;
  color: rgb(243 156 18 / var(--tw-text-opacity, 1));
}
.log-entry.error {
  --tw-bg-opacity: 1;
  background-color: rgb(253 242 242 / var(--tw-bg-opacity, 1));
  --tw-text-opacity: 1;
  color: rgb(231 76 60 / var(--tw-text-opacity, 1));
}
.log-timestamp {
  min-width: 4rem;
  font-size: 10px;
  --tw-text-opacity: 1;
  color: rgb(102 102 102 / var(--tw-text-opacity, 1));
}
.log-message {
  flex: 1 1 0%;
  overflow-wrap: break-word;
}
/* Config section styles */
.config-section {
  margin-bottom: 16px;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1));
  padding: 8px;
}
.config-controls {
  margin-bottom: 8px;
  display: flex;
  gap: 6px;
}
.config-list {
  max-height: 6rem;
  overflow-y: auto;
  border-radius: 0.25rem;
  border-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));
  --tw-bg-opacity: 1;
  background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));
}
.config-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom-width: 1px;
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
  padding: 0.375rem;
  font-size: 11px;
}
.config-item:last-child {
  border-bottom-width: 0px;
}
.config-item:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1));
}
.config-name {
  flex: 1 1 0%;
  font-weight: 500;
}
.config-meta {
  margin-right: 6px;
  font-size: 10px;
  --tw-text-opacity: 1;
  color: rgb(102 102 102 / var(--tw-text-opacity, 1));
}
.config-actions {
  display: flex;
  gap: 4px;
}
.config-action-btn {
  cursor: pointer;
  border-radius: 0.25rem;
  border-style: none;
  background-color: transparent;
  padding-left: 4px;
  padding-right: 4px;
  padding-top: 0.125rem;
  padding-bottom: 0.125rem;
  font-size: 10px;
  --tw-text-opacity: 1;
  color: rgb(102 102 102 / var(--tw-text-opacity, 1));
}
.config-action-btn:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(229 231 235 / var(--tw-bg-opacity, 1));
  --tw-text-opacity: 1;
  color: rgb(51 51 51 / var(--tw-text-opacity, 1));
}
/* Scrollbar styling */
.custom-scrollbar::-webkit-scrollbar {
  height: 0.375rem;
  width: 0.375rem;
}
.custom-scrollbar::-webkit-scrollbar-track {
  --tw-bg-opacity: 1;
  background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1));
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  border-radius: 0.25rem;
  --tw-bg-opacity: 1;
  background-color: rgb(209 213 219 / var(--tw-bg-opacity, 1));
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  --tw-bg-opacity: 1;
  background-color: rgb(156 163 175 / var(--tw-bg-opacity, 1));
}
.visible {
  visibility: visible;
}
.collapse {
  visibility: collapse;
}
.fixed {
  position: fixed;
}
.relative {
  position: relative;
}
.sticky {
  position: sticky;
}
.mb-1 {
  margin-bottom: 4px;
}
.mb-2 {
  margin-bottom: 6px;
}
.mb-5 {
  margin-bottom: 16px;
}
.mt-2 {
  margin-top: 6px;
}
.block {
  display: block;
}
.flex {
  display: flex;
}
.table {
  display: table;
}
.contents {
  display: contents;
}
.hidden {
  display: none;
}
.max-h-48 {
  max-height: 12rem;
}
.w-full {
  width: 100%;
}
.max-w-full {
  max-width: 100%;
}
.border-collapse {
  border-collapse: collapse;
}
.transform {
  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
}
.resize {
  resize: both;
}
.items-center {
  align-items: center;
}
.justify-between {
  justify-content: space-between;
}
.overflow-y-auto {
  overflow-y: auto;
}
.rounded {
  border-radius: 0.25rem;
}
.border {
  border-width: 1px;
}
.border-b {
  border-bottom-width: 1px;
}
.border-figma-border {
  --tw-border-opacity: 1;
  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));
}
.border-gray-300 {
  --tw-border-opacity: 1;
  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));
}
.bg-figma-bg {
  --tw-bg-opacity: 1;
  background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));
}
.bg-gray-50 {
  --tw-bg-opacity: 1;
  background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1));
}
.p-2 {
  padding: 6px;
}
.p-4 {
  padding: 12px;
}
.pb-3 {
  padding-bottom: 8px;
}
.font-mono {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
.font-sans {
  font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}
.text-base {
  font-size: 12px;
}
.text-lg {
  font-size: 14px;
}
.text-sm {
  font-size: 11px;
}
.text-xl {
  font-size: 16px;
}
.text-xs {
  font-size: 10px;
}
.font-semibold {
  font-weight: 600;
}
.leading-relaxed {
  line-height: 1.625;
}
.text-figma-text {
  --tw-text-opacity: 1;
  color: rgb(51 51 51 / var(--tw-text-opacity, 1));
}
.text-figma-textSecondary {
  --tw-text-opacity: 1;
  color: rgb(102 102 102 / var(--tw-text-opacity, 1));
}
.underline {
  text-decoration-line: underline;
}
.outline {
  outline-style: solid;
}
.filter {
  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);
}
.transition {
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

/* Custom component styles using Tailwind patterns */
  </style>
</head>
<body>
  <div id="react-page"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <script type="text/babel">
    const Header = ({
  selectionCount,
  jsonData,
  handleClearData
}) => /*#__PURE__*/React.createElement("header", {
  className: "mb-5 border-b border-figma-border pb-3"
}, /*#__PURE__*/React.createElement("h1", {
  className: "text-xl font-semibold mb-1"
}, "JSON Data Mapper"), /*#__PURE__*/React.createElement("div", {
  className: "flex justify-between items-center"
}, /*#__PURE__*/React.createElement("p", {
  className: "text-sm text-figma-textSecondary"
}, "Selected: ", selectionCount, " layer(s)"), jsonData && /*#__PURE__*/React.createElement("button", {
  onClick: handleClearData,
  className: "btn-danger"
}, "\uD83D\uDDD1\uFE0F Clear")));

const ConfigSection = ({
  showConfigSave,
  setShowConfigSave,
  showConfigList,
  setShowConfigList,
  savedConfigs,
  configName,
  setConfigName,
  saveConfiguration,
  loadConfigurations,
  clearAllConfigurations,
  loadConfiguration,
  deleteConfiguration
}) => /*#__PURE__*/React.createElement("section", {
  className: "config-section"
}, /*#__PURE__*/React.createElement("h3", {
  className: "text-lg font-semibold mb-2"
}, "Configuration"), /*#__PURE__*/React.createElement("div", {
  className: "config-controls"
}, /*#__PURE__*/React.createElement("button", {
  className: "btn-primary text-xs",
  onClick: () => setShowConfigSave(true)
}, "Save Config"), /*#__PURE__*/React.createElement("button", {
  className: "btn-primary text-xs",
  onClick: () => {
    loadConfigurations();
    setShowConfigList(true);
  }
}, "Load Config"), savedConfigs.length > 0 && /*#__PURE__*/React.createElement("button", {
  className: "btn-danger",
  onClick: clearAllConfigurations
}, "Clear All")), showConfigSave && /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("input", {
  type: "text",
  className: "form-input mb-2",
  placeholder: "Configuration name",
  value: configName,
  onChange: e => setConfigName(e.target.value)
}), /*#__PURE__*/React.createElement("div", {
  className: "config-controls"
}, /*#__PURE__*/React.createElement("button", {
  className: "btn-primary text-xs",
  onClick: saveConfiguration
}, "Save"), /*#__PURE__*/React.createElement("button", {
  className: "btn-secondary text-xs",
  onClick: () => setShowConfigSave(false)
}, "Cancel"))), showConfigList && savedConfigs.length > 0 && /*#__PURE__*/React.createElement("div", {
  className: "config-list"
}, savedConfigs.map(config => /*#__PURE__*/React.createElement("div", {
  key: config.name,
  className: "config-item"
}, /*#__PURE__*/React.createElement("div", {
  className: "config-name"
}, config.name), /*#__PURE__*/React.createElement("div", {
  className: "config-meta"
}, new Date(config.savedAt).toLocaleDateString()), /*#__PURE__*/React.createElement("div", {
  className: "config-actions"
}, /*#__PURE__*/React.createElement("button", {
  className: "config-action-btn",
  onClick: () => loadConfiguration(config)
}, "Load"), /*#__PURE__*/React.createElement("button", {
  className: "config-action-btn",
  onClick: () => deleteConfiguration(config.name)
}, "Delete"))))), showConfigList && /*#__PURE__*/React.createElement("button", {
  className: "btn-secondary text-xs",
  onClick: () => setShowConfigList(false)
}, "Close"));

const DataSourceTabs = ({
  dataSource,
  setDataSource,
  apiConfig,
  setApiConfig,
  isLoadingData,
  fetchApiData,
  processJsonData,
  dropZoneRef,
  handleFileInputChange
}) => /*#__PURE__*/React.createElement("section", {
  className: "data-source-section"
}, /*#__PURE__*/React.createElement("h3", {
  className: "text-lg font-semibold mb-2"
}, "Data Source"), /*#__PURE__*/React.createElement("div", {
  className: "data-source-tabs"
}, /*#__PURE__*/React.createElement("button", {
  className: `data-source-tab ${dataSource === 'file' ? 'active' : ''}`,
  onClick: () => setDataSource('file')
}, "File"), /*#__PURE__*/React.createElement("button", {
  className: `data-source-tab ${dataSource === 'api' ? 'active' : ''}`,
  onClick: () => setDataSource('api')
}, "API"), /*#__PURE__*/React.createElement("button", {
  className: `data-source-tab ${dataSource === 'manual' ? 'active' : ''}`,
  onClick: () => setDataSource('manual')
}, "Manual")), /*#__PURE__*/React.createElement("div", {
  className: "data-source-content"
}, dataSource === 'file' && /*#__PURE__*/React.createElement("div", {
  className: "upload-section"
}, /*#__PURE__*/React.createElement("div", {
  className: "drop-zone",
  ref: dropZoneRef
}, /*#__PURE__*/React.createElement("p", null, "Drop JSON file here or"), /*#__PURE__*/React.createElement("label", {
  className: "file-button"
}, "Choose File", /*#__PURE__*/React.createElement("input", {
  type: "file",
  accept: ".json,application/json",
  onChange: handleFileInputChange,
  style: {
    display: 'none'
  }
})), /*#__PURE__*/React.createElement("p", {
  className: "file-limit"
}, "Max 2MB"))), dataSource === 'api' && /*#__PURE__*/React.createElement("div", {
  className: "mb-5"
}, /*#__PURE__*/React.createElement("div", {
  className: "form-group"
}, /*#__PURE__*/React.createElement("label", {
  className: "form-label"
}, "API URL"), /*#__PURE__*/React.createElement("input", {
  type: "text",
  className: "form-input",
  value: apiConfig.url,
  onChange: e => setApiConfig(prev => ({
    ...prev,
    url: e.target.value
  })),
  placeholder: "https://api.example.com/data"
})), /*#__PURE__*/React.createElement("div", {
  className: "form-row"
}, /*#__PURE__*/React.createElement("div", {
  className: "form-group"
}, /*#__PURE__*/React.createElement("label", {
  className: "form-label"
}, "Method"), /*#__PURE__*/React.createElement("select", {
  className: "form-select",
  value: apiConfig.method,
  onChange: e => setApiConfig(prev => ({
    ...prev,
    method: e.target.value
  }))
}, /*#__PURE__*/React.createElement("option", {
  value: "GET"
}, "GET"), /*#__PURE__*/React.createElement("option", {
  value: "POST"
}, "POST"))), /*#__PURE__*/React.createElement("div", {
  className: "form-group"
}, /*#__PURE__*/React.createElement("label", {
  className: "form-label"
}, "Auth Type"), /*#__PURE__*/React.createElement("select", {
  className: "form-select",
  value: apiConfig.authType,
  onChange: e => setApiConfig(prev => ({
    ...prev,
    authType: e.target.value
  }))
}, /*#__PURE__*/React.createElement("option", {
  value: "none"
}, "None"), /*#__PURE__*/React.createElement("option", {
  value: "bearer"
}, "Bearer Token"), /*#__PURE__*/React.createElement("option", {
  value: "apikey"
}, "API Key")))), (apiConfig.authType === 'bearer' || apiConfig.authType === 'apikey') && /*#__PURE__*/React.createElement("div", {
  className: "form-group"
}, /*#__PURE__*/React.createElement("label", {
  className: "form-label"
}, apiConfig.authType === 'bearer' ? 'Bearer Token' : 'API Key'), /*#__PURE__*/React.createElement("input", {
  type: "password",
  className: "form-input",
  value: apiConfig.apiKey,
  onChange: e => setApiConfig(prev => ({
    ...prev,
    apiKey: e.target.value
  })),
  placeholder: "Enter your token/key"
})), /*#__PURE__*/React.createElement("button", {
  className: "fetch-button",
  onClick: fetchApiData,
  disabled: isLoadingData || !apiConfig.url.trim()
}, isLoadingData ? 'Loading...' : 'Fetch Data')), dataSource === 'manual' && /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, "Paste your JSON data:"), /*#__PURE__*/React.createElement("textarea", {
  rows: 8,
  className: "w-full mt-2 p-2 font-mono text-sm border border-gray-300 rounded",
  placeholder: "Paste JSON data here...",
  onChange: e => {
    try {
      const parsed = JSON.parse(e.target.value);
      processJsonData(parsed, 'manual');
    } catch (error) {
      // Invalid JSON, ignore
    }
  }
}))));

const JsonPreview = ({
  jsonData,
  jsonKeys,
  getNestedValue
}) => /*#__PURE__*/React.createElement("section", {
  className: "json-preview"
}, /*#__PURE__*/React.createElement("h3", {
  className: "text-lg font-semibold mb-2"
}, "JSON Preview (", jsonData.length, " items)"), /*#__PURE__*/React.createElement("div", {
  className: "table-container"
}, /*#__PURE__*/React.createElement("table", {
  className: "preview-table"
}, /*#__PURE__*/React.createElement("thead", null, /*#__PURE__*/React.createElement("tr", null, jsonKeys.slice(0, 10).map(key => /*#__PURE__*/React.createElement("th", {
  key: key
}, key)))), /*#__PURE__*/React.createElement("tbody", null, jsonData.slice(0, 10).map((item, index) => /*#__PURE__*/React.createElement("tr", {
  key: index
}, jsonKeys.slice(0, 10).map(key => /*#__PURE__*/React.createElement("td", {
  key: key
}, String(getNestedValue(item, key) || '').slice(0, 50)))))))));

const KeyMapping = ({
  mappings,
  updateMapping,
  valueBuilders,
  openValueBuilder,
  clearValueBuilder
}) => /*#__PURE__*/React.createElement("section", {
  className: "mapping-section"
}, /*#__PURE__*/React.createElement("h3", {
  className: "text-lg font-semibold mb-2"
}, "Key Mapping"), /*#__PURE__*/React.createElement("div", {
  className: "mapping-table"
}, mappings.map(mapping => /*#__PURE__*/React.createElement("div", {
  key: mapping.jsonKey,
  className: "mapping-row"
}, /*#__PURE__*/React.createElement("label", null, mapping.jsonKey), /*#__PURE__*/React.createElement("input", {
  type: "text",
  placeholder: "Figma layer name",
  value: mapping.layerName,
  onChange: e => updateMapping(mapping.jsonKey, e.target.value)
}), /*#__PURE__*/React.createElement("button", {
  className: `build-value-btn ${valueBuilders[mapping.jsonKey] ? 'active' : ''}`,
  onClick: () => openValueBuilder(mapping.jsonKey),
  title: "Build custom value"
}, "\uD83D\uDD27"), valueBuilders[mapping.jsonKey] && /*#__PURE__*/React.createElement("button", {
  className: "clear-builder-btn",
  onClick: () => clearValueBuilder(mapping.jsonKey),
  title: "Clear value builder"
}, "\u2717")))));

const ValueBuilderModal = ({
  valueBuilderModal,
  currentBuilder,
  jsonKeys,
  jsonData,
  addBuilderPart,
  updateBuilderPart,
  removeBuilderPart,
  moveBuilderPart,
  evaluateValueBuilder,
  closeValueBuilder,
  saveValueBuilder
}) => {
  if (!valueBuilderModal.isOpen) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "modal-overlay"
  }, /*#__PURE__*/React.createElement("div", {
    className: "modal"
  }, /*#__PURE__*/React.createElement("div", {
    className: "modal-header"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "modal-title"
  }, "Value Builder: ", valueBuilderModal.mappingKey), /*#__PURE__*/React.createElement("button", {
    className: "modal-close",
    onClick: closeValueBuilder
  }, "\xD7")), /*#__PURE__*/React.createElement("div", {
    className: "add-part-buttons"
  }, /*#__PURE__*/React.createElement("button", {
    className: "add-part-btn",
    onClick: () => addBuilderPart('key')
  }, "Add Key"), /*#__PURE__*/React.createElement("button", {
    className: "add-part-btn",
    onClick: () => addBuilderPart('text')
  }, "Add Text"), /*#__PURE__*/React.createElement("button", {
    className: "add-part-btn",
    onClick: () => addBuilderPart('separator')
  }, "Add Separator")), currentBuilder.parts.map((part, index) => /*#__PURE__*/React.createElement("div", {
    key: index,
    className: "builder-part"
  }, /*#__PURE__*/React.createElement("div", {
    className: "reorder-controls"
  }, /*#__PURE__*/React.createElement("button", {
    className: "reorder-btn",
    onClick: () => moveBuilderPart(index, Math.max(0, index - 1)),
    disabled: index === 0
  }, "\u2191"), /*#__PURE__*/React.createElement("button", {
    className: "reorder-btn",
    onClick: () => moveBuilderPart(index, Math.min(currentBuilder.parts.length - 1, index + 1)),
    disabled: index === currentBuilder.parts.length - 1
  }, "\u2193")), /*#__PURE__*/React.createElement("select", {
    value: part.type,
    onChange: e => updateBuilderPart(index, 'type', e.target.value)
  }, /*#__PURE__*/React.createElement("option", {
    value: "key"
  }, "JSON Key"), /*#__PURE__*/React.createElement("option", {
    value: "text"
  }, "Static Text"), /*#__PURE__*/React.createElement("option", {
    value: "separator"
  }, "Separator")), part.type === 'key' ? /*#__PURE__*/React.createElement("select", {
    value: part.value,
    onChange: e => updateBuilderPart(index, 'value', e.target.value)
  }, /*#__PURE__*/React.createElement("option", {
    value: ""
  }, "Select key..."), jsonKeys.map(key => /*#__PURE__*/React.createElement("option", {
    key: key,
    value: key
  }, key))) : /*#__PURE__*/React.createElement("input", {
    type: "text",
    value: part.value,
    onChange: e => updateBuilderPart(index, 'value', e.target.value),
    placeholder: part.type === 'text' ? 'Enter text' : 'e.g., " - "'
  }), /*#__PURE__*/React.createElement("button", {
    className: "remove-part-btn",
    onClick: () => removeBuilderPart(index)
  }, "\xD7"))), jsonData && jsonData.length > 0 && /*#__PURE__*/React.createElement("div", {
    className: "preview-section"
  }, /*#__PURE__*/React.createElement("div", {
    className: "preview-label"
  }, "Preview:"), /*#__PURE__*/React.createElement("div", {
    className: "preview-value"
  }, evaluateValueBuilder(currentBuilder, jsonData[0]))), /*#__PURE__*/React.createElement("div", {
    className: "modal-actions"
  }, /*#__PURE__*/React.createElement("button", {
    className: "modal-btn secondary",
    onClick: closeValueBuilder
  }, "Cancel"), /*#__PURE__*/React.createElement("button", {
    className: "modal-btn primary",
    onClick: saveValueBuilder
  }, "Save"))));
};

const ActionSection = ({
  handleApplyData,
  selectionCount
}) => /*#__PURE__*/React.createElement("section", {
  className: "action-section"
}, /*#__PURE__*/React.createElement("button", {
  className: "btn-success w-full",
  onClick: handleApplyData,
  disabled: selectionCount === 0
}, "Apply Data to Selection"));

const LogsSection = ({
  logs
}) => /*#__PURE__*/React.createElement("section", {
  className: "logs-section"
}, /*#__PURE__*/React.createElement("h3", {
  className: "text-lg font-semibold mb-2"
}, "Logs"), /*#__PURE__*/React.createElement("div", {
  className: "logs-container custom-scrollbar max-h-48 overflow-y-auto border border-figma-border rounded bg-gray-50"
}, logs.map((log, index) => /*#__PURE__*/React.createElement("div", {
  key: index,
  className: `log-entry ${log.level}`
}, /*#__PURE__*/React.createElement("span", {
  className: "log-timestamp"
}, log.timestamp), /*#__PURE__*/React.createElement("span", {
  className: "log-message"
}, log.message)))));

const App = () => {
  const {
    useState,
    useCallback,
    useEffect,
    useRef
  } = React;

  // All state declarations here...
  const [jsonData, setJsonData] = useState(null);
  const [jsonKeys, setJsonKeys] = useState([]);
  const [mappings, setMappings] = useState([]);
  const [selectionCount, setSelectionCount] = useState(0);
  const [logs, setLogs] = useState([]);
  const [isDragging, setIsDragging] = useState(false);
  const [dataSource, setDataSource] = useState('file');
  const [apiConfig, setApiConfig] = useState({
    url: '',
    method: 'GET',
    headers: {},
    apiKey: '',
    authType: 'none'
  });
  const [isLoadingData, setIsLoadingData] = useState(false);
  const [savedConfigs, setSavedConfigs] = useState([]);
  const [showConfigSave, setShowConfigSave] = useState(false);
  const [configName, setConfigName] = useState('');
  const [showConfigList, setShowConfigList] = useState(false);
  const [valueBuilderModal, setValueBuilderModal] = useState({
    isOpen: false,
    mappingKey: null
  });
  const [currentBuilder, setCurrentBuilder] = useState({
    parts: [{
      type: 'key',
      value: ''
    }]
  });
  const [valueBuilders, setValueBuilders] = useState({});
  const dropZoneRef = useRef(null);

  // All the callback functions will be inserted here during build...
  // This is a placeholder that gets replaced during the build process
  
    // Helper functions
    function extractJsonKeys(data, maxDepth = 3) {
      const keys = new Set();
      
      function extractKeysRecursive(obj, prefix = '', depth = 0) {
        if (depth >= maxDepth || obj === null || typeof obj !== 'object') {
          return;
        }
        
        for (const key in obj) {
          if (obj.hasOwnProperty(key)) {
            const fullKey = prefix ? `${prefix}.${key}` : key;
            keys.add(fullKey);
            
            if (typeof obj[key] === 'object' && obj[key] !== null) {
              if (Array.isArray(obj[key])) {
                const arrayItems = obj[key].slice(0, 3);
                arrayItems.forEach((item, index) => {
                  if (typeof item === 'object' && item !== null) {
                    extractKeysRecursive(item, `${fullKey}[${index}]`, depth + 1);
                    extractKeysRecursive(item, `${fullKey}[]`, depth + 1);
                  }
                });
              } else {
                extractKeysRecursive(obj[key], fullKey, depth + 1);
              }
            }
          }
        }
      }
      
      data.slice(0, 10).forEach(item => extractKeysRecursive(item));
      return Array.from(keys).sort();
    }

    function getDefaultLayerName(jsonKey) {
      if (jsonKey.includes('[') && jsonKey.includes('.')) {
        return jsonKey.split('.').pop() || jsonKey;
      }
      if (jsonKey.includes('[')) {
        return jsonKey.split('[')[0];
      }
      if (jsonKey.includes('.')) {
        return jsonKey.split('.').pop() || jsonKey;
      }
      return jsonKey;
    }

    function getNestedValue(obj, path) {
      const parts = path.split('.');
      
      return parts.reduce((current, part) => {
        if (current === null || current === undefined) return undefined;
        
        const arrayMatch = part.match(/^(.+)\\[(\\d*)\\]$/);
        if (arrayMatch) {
          const [, arrayKey, index] = arrayMatch;
          const arrayValue = current[arrayKey];
          
          if (!Array.isArray(arrayValue)) return undefined;
          
          if (index === '') {
            return arrayValue[0];
          } else {
            return arrayValue[parseInt(index)];
          }
        }
        
        return current[part];
      }, obj);
    }

    function evaluateValueBuilder(builder, data) {
      if (!builder || !builder.parts || builder.parts.length === 0) return '';
      
      return builder.parts.map(part => {
        switch (part.type) {
          case 'text':
            return part.value || '';
          case 'key':
            if (!part.value) return '';
            return getNestedValue(data, part.value) || '';
          case 'separator':
            return part.value || ' ';
          default:
            return '';
        }
      }).join('');
    }

    function setupDragAndDrop(dropZone, onFileDrop) {
      if (!dropZone) return;
      
      const handleDrag = (e) => {
        e.preventDefault();
        e.stopPropagation();
      };

      const handleDragIn = (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.add('dragging');
      };

      const handleDragOut = (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('dragging');
      };

      const handleDrop = (e) => {
        e.preventDefault();
        e.stopPropagation();
        dropZone.classList.remove('dragging');
        
        const files = e.dataTransfer.files;
        if (files && files.length > 0) {
          onFileDrop(files[0]);
        }
      };

      dropZone.addEventListener('dragenter', handleDragIn);
      dropZone.addEventListener('dragleave', handleDragOut);
      dropZone.addEventListener('dragover', handleDrag);
      dropZone.addEventListener('drop', handleDrop);
    }

    // Main app functions
    const addLog = useCallback((message, level = 'info') => {
      setLogs(prev => [...prev, {
        message,
        level,
        timestamp: new Date().toLocaleTimeString()
      }]);
    }, []);

    const processJsonData = useCallback((parsed, source = 'unknown') => {
      try {
        let dataArray;
        
        addLog(`Parsed JSON type: ${Array.isArray(parsed) ? 'array' : typeof parsed}`, 'info');
        
        if (Array.isArray(parsed)) {
          dataArray = parsed;
          addLog('Using direct array', 'info');
        } else if (typeof parsed === 'object' && parsed !== null) {
          const keys = Object.keys(parsed);
          addLog(`Object has ${keys.length} keys: ${keys.join(', ')}`, 'info');
          
          if (keys.length === 1 && Array.isArray(parsed[keys[0]])) {
            dataArray = parsed[keys[0]];
            addLog(`Found array data in property "${keys[0]}" with ${dataArray.length} items`, 'info');
          } else {
            const arrayProperty = keys.find(key => Array.isArray(parsed[key]));
            if (arrayProperty) {
              const arrayData = parsed[arrayProperty];
              const metadata = {};
              
              keys.forEach(key => {
                if (key !== arrayProperty) {
                  metadata[key] = parsed[key];
                }
              });
              
              dataArray = arrayData.map(item => ({
                ...metadata,
                ...item
              }));
              
              addLog(`Merged ${Object.keys(metadata).length} metadata keys with ${arrayData.length} array items from "${arrayProperty}"`, 'info');
            } else {
              dataArray = [parsed];
              addLog('No arrays found, wrapping object in array', 'info');
            }
          }
        } else {
          dataArray = [parsed];
          addLog('Wrapping primitive value in array', 'info');
        }
        
        setJsonData(dataArray);
        const keys = extractJsonKeys(dataArray);
        setJsonKeys(keys);
        
        setMappings(keys.map(key => ({ 
          jsonKey: key, 
          layerName: getDefaultLayerName(key),
          valueBuilder: null
        })));
        
        addLog(`Loaded JSON from ${source} with ${dataArray.length} objects and ${keys.length} unique keys`, 'info');
        return true;
      } catch (error) {
        addLog(`Invalid JSON data from ${source}`, 'error');
        console.error('JSON parsing error:', error);
        return false;
      }
    }, [addLog]);

    // API data fetching
    const fetchApiData = useCallback(async () => {
      if (!apiConfig.url.trim()) {
        addLog('API URL is required', 'error');
        return;
      }

      setIsLoadingData(true);
      addLog(`Fetching data from API: ${apiConfig.url}`, 'info');

      try {
        const headers = { ...apiConfig.headers };
        
        if (apiConfig.authType === 'bearer' && apiConfig.apiKey) {
          headers['Authorization'] = `Bearer ${apiConfig.apiKey}`;
        } else if (apiConfig.authType === 'apikey' && apiConfig.apiKey) {
          headers['X-API-Key'] = apiConfig.apiKey;
        }

        const response = await fetch(apiConfig.url, {
          method: apiConfig.method,
          headers: headers
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const data = await response.json();
        processJsonData(data, 'API');
        addLog('API data loaded successfully', 'info');
      } catch (error) {
        addLog(`API request failed: ${error.message}`, 'error');
      } finally {
        setIsLoadingData(false);
      }
    }, [apiConfig, processJsonData, addLog]);

    // Configuration management
    const saveConfiguration = useCallback(() => {
      if (!configName.trim()) {
        addLog('Configuration name is required', 'error');
        return;
      }

      const config = {
        name: configName,
        dataSource,
        apiConfig,
        mappings,
        valueBuilders,
        savedAt: new Date().toISOString()
      };

      parent.postMessage({
        pluginMessage: {
          type: 'save-config',
          data: config
        }
      }, '*');

      setConfigName('');
      setShowConfigSave(false);
    }, [configName, dataSource, apiConfig, mappings, valueBuilders, addLog]);

    const loadConfigurations = useCallback(() => {
      parent.postMessage({
        pluginMessage: {
          type: 'load-configs'
        }
      }, '*');
    }, []);

    const loadConfiguration = useCallback((config) => {
      setDataSource(config.dataSource);
      setApiConfig(config.apiConfig);
      setMappings(config.mappings || []);
      setValueBuilders(config.valueBuilders || {});
      addLog(`Configuration "${config.name}" loaded`, 'info');
      setShowConfigList(false);
    }, [addLog]);

    const deleteConfiguration = useCallback((configName) => {
      parent.postMessage({
        pluginMessage: {
          type: 'delete-config',
          configName
        }
      }, '*');
    }, [addLog]);

    const clearAllConfigurations = useCallback(() => {
      parent.postMessage({
        pluginMessage: {
          type: 'clear-configs'
        }
      }, '*');
    }, []);

    const handleFileUpload = useCallback((file) => {
      if (file.size > 2 * 1024 * 1024) {
        addLog('File size exceeds 2MB limit', 'error');
        return;
      }

      const reader = new FileReader();
      reader.onload = (e) => {
        const content = e.target?.result;
        const parsed = JSON.parse(content);
        processJsonData(parsed, 'file');
      };
      reader.readAsText(file);
    }, [processJsonData]);

    const handleFileInputChange = useCallback((e) => {
      const file = e.target.files?.[0];
      if (file) {
        handleFileUpload(file);
      }
    }, [handleFileUpload]);

    const updateMapping = useCallback((jsonKey, layerName) => {
      setMappings(prev => prev.map(mapping => 
        mapping.jsonKey === jsonKey 
          ? { ...mapping, layerName }
          : mapping
      ));
    }, []);

    // Value builder functions
    const openValueBuilder = useCallback((mappingKey) => {
      const currentMapping = mappings.find(m => m.jsonKey === mappingKey);
      if (currentMapping && valueBuilders[mappingKey]) {
        setCurrentBuilder(valueBuilders[mappingKey]);
      } else {
        setCurrentBuilder({ 
          parts: [{ type: 'key', value: mappingKey }] 
        });
      }
      setValueBuilderModal({ isOpen: true, mappingKey });
    }, [mappings, valueBuilders]);

    const closeValueBuilder = useCallback(() => {
      setValueBuilderModal({ isOpen: false, mappingKey: null });
      setCurrentBuilder({ parts: [{ type: 'key', value: '' }] });
    }, []);

    const saveValueBuilder = useCallback(() => {
      if (!valueBuilderModal.mappingKey) return;
      
      setValueBuilders(prev => ({
        ...prev,
        [valueBuilderModal.mappingKey]: { ...currentBuilder }
      }));
      
      addLog(`Value builder saved for ${valueBuilderModal.mappingKey}`, 'info');
      closeValueBuilder();
    }, [valueBuilderModal.mappingKey, currentBuilder, addLog, closeValueBuilder]);

    const clearValueBuilder = useCallback((mappingKey) => {
      setValueBuilders(prev => {
        const newBuilders = { ...prev };
        delete newBuilders[mappingKey];
        return newBuilders;
      });
      addLog(`Value builder cleared for ${mappingKey}`, 'info');
    }, [addLog]);

    const addBuilderPart = useCallback((type) => {
      setCurrentBuilder(prev => ({
        ...prev,
        parts: [...prev.parts, { type, value: '' }]
      }));
    }, []);

    const updateBuilderPart = useCallback((index, field, value) => {
      setCurrentBuilder(prev => ({
        ...prev,
        parts: prev.parts.map((part, i) => 
          i === index ? { ...part, [field]: value } : part
        )
      }));
    }, []);

    const removeBuilderPart = useCallback((index) => {
      setCurrentBuilder(prev => ({
        ...prev,
        parts: prev.parts.filter((_, i) => i !== index)
      }));
    }, []);

    const moveBuilderPart = useCallback((fromIndex, toIndex) => {
      setCurrentBuilder(prev => {
        const newParts = [...prev.parts];
        const [movedPart] = newParts.splice(fromIndex, 1);
        newParts.splice(toIndex, 0, movedPart);
        return { ...prev, parts: newParts };
      });
    }, []);

    const handleApplyData = useCallback(() => {
      if (!jsonData || jsonData.length === 0) {
        addLog('No JSON data loaded', 'error');
        return;
      }

      const activeMappings = mappings.filter(m => m.layerName.trim() !== '');
      if (activeMappings.length === 0) {
        addLog('No layer mappings configured', 'error');
        return;
      }

      if (selectionCount === 0) {
        addLog('No layers selected in Figma', 'error');
        return;
      }

      parent.postMessage({
        pluginMessage: {
          type: 'apply-data',
          jsonData,
          mappings: activeMappings,
          valueBuilders
        }
      }, '*');
    }, [jsonData, mappings, selectionCount, addLog, valueBuilders]);

    const handleClearData = useCallback(() => {
      setJsonData(null);
      setJsonKeys([]);
      setMappings([]);
      addLog('Data cleared', 'info');
    }, [addLog]);

    useEffect(() => {
      const handleMessage = (event) => {
        const { type, message, level, selectionCount: count, data } = event.data.pluginMessage || {};
        
        if (type === 'log') {
          addLog(message, level);
        } else if (type === 'selection-changed') {
          setSelectionCount(count);
        } else if (type === 'configs-loaded') {
          setSavedConfigs(data || []);
        } else if (type === 'config-saved') {
          addLog('Configuration saved successfully', 'info');
          loadConfigurations();
        } else if (type === 'config-deleted') {
          addLog('Configuration deleted successfully', 'info');
          loadConfigurations();
        } else if (type === 'configs-cleared') {
          setSavedConfigs([]);
          addLog('All configurations cleared', 'info');
        } else if (type === 'storage-error') {
          addLog(`Storage error: ${message}`, 'error');
        }
      };

      window.addEventListener('message', handleMessage);
      return () => window.removeEventListener('message', handleMessage);
    }, [addLog, loadConfigurations]);

    useEffect(() => {
      loadConfigurations();
    }, [loadConfigurations]);

    useEffect(() => {
      if (dropZoneRef.current) {
        setupDragAndDrop(dropZoneRef.current, handleFileUpload);
      }
    }, [handleFileUpload]);
    ;
  return /*#__PURE__*/React.createElement("div", {
    className: "p-4 max-w-full font-sans text-base leading-relaxed text-figma-text bg-figma-bg"
  }, /*#__PURE__*/React.createElement(Header, {
    selectionCount: selectionCount,
    jsonData: jsonData,
    handleClearData: handleClearData
  }), /*#__PURE__*/React.createElement(ConfigSection, {
    showConfigSave: showConfigSave,
    setShowConfigSave: setShowConfigSave,
    showConfigList: showConfigList,
    setShowConfigList: setShowConfigList,
    savedConfigs: savedConfigs,
    configName: configName,
    setConfigName: setConfigName,
    saveConfiguration: saveConfiguration,
    loadConfigurations: loadConfigurations,
    clearAllConfigurations: clearAllConfigurations,
    loadConfiguration: loadConfiguration,
    deleteConfiguration: deleteConfiguration
  }), /*#__PURE__*/React.createElement(DataSourceTabs, {
    dataSource: dataSource,
    setDataSource: setDataSource,
    apiConfig: apiConfig,
    setApiConfig: setApiConfig,
    isLoadingData: isLoadingData,
    fetchApiData: fetchApiData,
    processJsonData: processJsonData,
    dropZoneRef: dropZoneRef,
    handleFileInputChange: handleFileInputChange
  }), jsonData && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(JsonPreview, {
    jsonData: jsonData,
    jsonKeys: jsonKeys,
    getNestedValue: getNestedValue
  }), /*#__PURE__*/React.createElement(KeyMapping, {
    mappings: mappings,
    updateMapping: updateMapping,
    valueBuilders: valueBuilders,
    openValueBuilder: openValueBuilder,
    clearValueBuilder: clearValueBuilder
  }), /*#__PURE__*/React.createElement(ActionSection, {
    handleApplyData: handleApplyData,
    selectionCount: selectionCount
  })), /*#__PURE__*/React.createElement(ValueBuilderModal, {
    valueBuilderModal: valueBuilderModal,
    currentBuilder: currentBuilder,
    jsonKeys: jsonKeys,
    jsonData: jsonData,
    addBuilderPart: addBuilderPart,
    updateBuilderPart: updateBuilderPart,
    removeBuilderPart: removeBuilderPart,
    moveBuilderPart: moveBuilderPart,
    evaluateValueBuilder: evaluateValueBuilder,
    closeValueBuilder: closeValueBuilder,
    saveValueBuilder: saveValueBuilder
  }), /*#__PURE__*/React.createElement(LogsSection, {
    logs: logs
  }));
};

// Render the app
ReactDOM.render(React.createElement(App), document.getElementById("react-page"));
  </script>
</body>
</html>