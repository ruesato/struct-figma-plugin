"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsx_runtime_1 = require("react/jsx-runtime");
const dialog_1 = require("./ui/dialog");
const button_1 = require("./ui/button");
const input_1 = require("./ui/input");
const select_1 = require("./ui/select");
const lucide_react_1 = require("lucide-react");
const ValueBuilderModal = ({ valueBuilderModal, currentBuilder, jsonKeys, jsonData, addBuilderPart, updateBuilderPart, removeBuilderPart, moveBuilderPart, evaluateValueBuilder, closeValueBuilder, saveValueBuilder }) => {
    return ((0, jsx_runtime_1.jsx)(dialog_1.Dialog, { open: valueBuilderModal.isOpen, onOpenChange: closeValueBuilder, children: (0, jsx_runtime_1.jsxs)(dialog_1.DialogContent, { className: "bg-zinc-950 border-zinc-800 text-white max-w-2xl p-0", children: [(0, jsx_runtime_1.jsx)(dialog_1.DialogHeader, { className: "p-6 pb-4", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)(dialog_1.DialogTitle, { className: "text-sm font-normal text-zinc-300 uppercase tracking-wide", children: ["VALUE BUILDER: ", valueBuilderModal.mappingKey] }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "ghost", size: "sm", onClick: closeValueBuilder, className: "h-6 w-6 p-0 text-zinc-400 hover:text-white hover:bg-zinc-800", children: (0, jsx_runtime_1.jsx)(lucide_react_1.X, { className: "h-4 w-4" }) })] }) }), (0, jsx_runtime_1.jsxs)("div", { className: "px-6 pb-6 space-y-4", children: [jsonData && jsonData.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-2", children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm text-zinc-300", children: "Preview" }), (0, jsx_runtime_1.jsx)("div", { className: "p-3 bg-zinc-900 border border-zinc-800 rounded-md text-sm text-zinc-100", children: evaluateValueBuilder(currentBuilder, jsonData[0]) })] })), (0, jsx_runtime_1.jsx)("div", { className: "space-y-2", children: currentBuilder.parts.map((part, index) => ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-3 p-3 bg-zinc-900 border border-zinc-800 rounded-md", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: "ghost", size: "sm", className: "h-8 w-8 p-0 text-zinc-400 hover:text-white cursor-grab", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Grip, { className: "h-4 w-4" }) }), (0, jsx_runtime_1.jsxs)(select_1.Select, { value: part.type, onValueChange: (value) => updateBuilderPart(index, 'type', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { className: "w-32 h-8 bg-zinc-800 border-zinc-700 text-white", children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, {}) }), (0, jsx_runtime_1.jsxs)(select_1.SelectContent, { className: "bg-zinc-800 border-zinc-700", children: [(0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: "key", children: "JSON Key" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: "text", children: "Text" }), (0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: "separator", children: "Separator" })] })] }), (0, jsx_runtime_1.jsx)("div", { className: "flex-1", children: part.type === 'key' ? ((0, jsx_runtime_1.jsxs)(select_1.Select, { value: part.value, onValueChange: (value) => updateBuilderPart(index, 'value', value), children: [(0, jsx_runtime_1.jsx)(select_1.SelectTrigger, { className: "h-8 bg-zinc-800 border-zinc-700 text-white", children: (0, jsx_runtime_1.jsx)(select_1.SelectValue, { placeholder: "Select key..." }) }), (0, jsx_runtime_1.jsx)(select_1.SelectContent, { className: "bg-zinc-800 border-zinc-700", children: jsonKeys.map(key => ((0, jsx_runtime_1.jsx)(select_1.SelectItem, { value: key, children: key }, key))) })] })) : ((0, jsx_runtime_1.jsx)(input_1.Input, { value: part.value, onChange: (e) => updateBuilderPart(index, 'value', e.target.value), placeholder: part.type === 'text' ? 'Enter text' : 'e.g., " - "', className: "h-8 bg-zinc-800 border-zinc-700 text-white placeholder:text-zinc-500" })) }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "ghost", size: "sm", onClick: () => removeBuilderPart(index), className: "h-8 w-8 p-0 text-zinc-400 hover:text-red-400 hover:bg-zinc-800", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Trash2, { className: "h-4 w-4" }) })] }, index))) }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "ghost", onClick: () => addBuilderPart('key'), className: "w-full h-10 border border-dashed border-zinc-700 text-zinc-400 hover:text-white hover:border-zinc-600 hover:bg-zinc-900", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Plus, { className: "h-4 w-4 mr-2" }), "Add another value"] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex gap-2 pt-4", children: [(0, jsx_runtime_1.jsx)(button_1.Button, { variant: "outline", onClick: closeValueBuilder, className: "flex-1 bg-transparent border-zinc-700 text-zinc-300 hover:bg-zinc-800 hover:text-white", children: "Cancel" }), (0, jsx_runtime_1.jsx)(button_1.Button, { onClick: saveValueBuilder, className: "flex-1 bg-blue-600 hover:bg-blue-700 text-white", children: "Save" })] })] })] }) }));
};
exports.default = ValueBuilderModal;
